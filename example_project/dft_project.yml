# DFT Project Configuration
project_name: my_analytics

# Database and service connections
# Each connection can be used as both source and endpoint
connections:
  # Production PostgreSQL
  main_postgres:
    type: postgresql
    host: "{{ env_var('POSTGRES_HOST') }}"
    port: 5432
    database: "{{ env_var('POSTGRES_DB') }}"
    user: "{{ env_var('POSTGRES_USER') }}"
    password: "{{ env_var('POSTGRES_PASSWORD') }}"
    
  # Analytics ClickHouse warehouse (production)
  analytics_warehouse:
    type: clickhouse
    host: "{{ env_var('CH_PROD_HOST') }}"
    port: 9000
    database: "{{ env_var('CH_PROD_DATABASE') }}"
    user: "{{ env_var('CH_PROD_USER') }}"
    password: "{{ env_var('CH_PROD_PASSWORD') }}"
    
  # ClickHouse staging
  analytics_staging:
    type: clickhouse
    host: "{{ env_var('CH_STAGE_HOST') }}"
    port: 9000
    database: "{{ env_var('CH_STAGE_DATABASE') }}"
    user: "{{ env_var('CH_STAGE_USER') }}"
    password: "{{ env_var('CH_STAGE_PASSWORD') }}"
    
  # ClickHouse shard 1
  clickhouse_shard1:
    type: clickhouse
    host: "{{ env_var('CH_SHARD1_HOST') }}"
    port: 9000
    database: "{{ env_var('CH_SHARD1_DATABASE') }}"
    user: "{{ env_var('CH_SHARD1_USER') }}"
    password: "{{ env_var('CH_SHARD1_PASSWORD') }}"
    
  # ClickHouse shard 2  
  clickhouse_shard2:
    type: clickhouse
    host: "{{ env_var('CH_SHARD2_HOST') }}"
    port: 9000
    database: "{{ env_var('CH_SHARD2_DATABASE') }}"
    user: "{{ env_var('CH_SHARD2_USER') }}"
    password: "{{ env_var('CH_SHARD2_PASSWORD') }}"

# Global variables
variables:
  # Default date ranges
  default_lookback_days: 7
  default_start_date: "2024-01-01"
  
  # Business logic
  min_revenue_threshold: 1.0
  core_countries: ['US', 'GB', 'DE', 'FR']